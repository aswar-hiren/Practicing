@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model DataLayer.ViewModels.CreateAdminAccountvm;

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

<div class="container-fluid  vh-100">
    <partial name="_navbar" />
    <partial name="_Notification">

        <div class="container d-flex flex-column mt-3 gap-2 p-3 ">


            <div class="container d-flex justify-content-between p-0 my-2">

                <p class="h4">Create Admin Account</p>

                <a asp-controller="Admin" asp-action="ProviderInformation">
                    <span class="border border-info text-info p-2 rounded-2">
                        < Back
                    </span>
                </a>


            </div>
            <form asp-action="CreateAdminAccount">
                <div class="row shadow p-4">

                    <div class="title mb-3">Account Information</div>
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="username" placeholder="User Name" disabled>
                                <label for="username">User Name</label>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-floating mb-3">

                                <input type="password" class="form-control" id="password" placeholder="Password" asp-for="Password">
                                <label for="password">Password</label>
                                <span class="text-danger" asp-validation-for="Password"></span>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-floating mb-3">
                                <select class="form-select form-control" aria-label="Default select example" id="role" asp-for="RoleId">
                                    @foreach (var item in Model.Rolelist!)
                                    {
                                        <option value="@item.Roleid">@item.Name</option>
                                    }
                                </select>
                                <label for="role">Role</label>
                                <span class="text-danger" asp-validation-for="RoleId"></span>
                            </div>
                        </div>
                    </div>

                    <div class="title mb-3 mt-3">Administrator Information</div>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control " id="firstname" placeholder="First Name" asp-for="Firstname">
                                <label for="firstname">First Name</label>
                                <span class="text-danger" asp-validation-for="Firstname"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control " id="lastname" placeholder="Last Name" asp-for="Lastname">
                                <label for="lastname">Last Name</label>
                                <span class="text-danger" asp-validation-for="Lastname"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control " id="email" onblur="checkEmail()" placeholder="Email" asp-for="Email">
                                <label for="email">Email</label>
                                <span class="text-danger" asp-validation-for="Email"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control " id="cemail" placeholder="Confirm Email" asp-for="confirmEmail">
                                <label for="cemail">Confirm Email</label>
                                <span class="text-danger" asp-validation-for="confirmEmail"></span>
                            </div>
                        </div>
                        <div class="col-lg-6 form-floating mb-3">
<<<<<<< HEAD
                            <input id="phone1" type="text" class="form-control phone py-3" placeholder="Phone Number" asp-for="Phonenumber">
                            <label for="cemail">Phone Number</label>
=======
                            <input id="phone1" type="tel" class="form-control phone py-3" asp-for="Phonenumber">
>>>>>>> a7d636f3ea8b91980d7206e593c9e656cfc1182e
                            <span class="text-danger" asp-validation-for="Phonenumber"></span>
                        </div>
                        <div class="form-floating mb-3  col-lg-12 d-flex ">

                            @foreach (var item in Model.regions)
                            {
                                <div class="form-check me-3 ">

                                    <input class="form-check-input" name="regions" type="checkbox" value="@item.Regionid" id="checkbox-@item.Regionid" />
                                    <label class="form-check-label" for="checkbox-@item.Regionid" style="font-size: 15px; margin:0px;">@item.Name</label>
                                </div>
                            }

                        </div>
                    </div>

                    <div class="title mb-3 mt-3">Mailing & Billing Information</div>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control " id="address1" placeholder="Address 1" asp-for="Address1">
                                <label for="address1">Address 1</label>
                                <span class="text-danger" asp-validation-for="Address1"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control " id="address2" placeholder="Address 2" asp-for="Address2">
                                <label for="address2">Address 2</label>
                                <span class="text-danger" asp-validation-for="Address2"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <select class="form-select form-control " aria-label="Default select example" id="state" asp-for="RegionId">

                                    @foreach (var item in Model.regions!)
                                    {
                                        <option value="@item.Regionid">@item.Name</option>
                                    }
                                </select>
                                <label for="state">State</label>
                                <span class="text-danger" asp-validation-for="RegionId"></span>
                                @*<span class="text-danger" asp-validation-for="RegionId"></span>*@
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control " id="city" placeholder="City " asp-for="City">
                                <label for="city">City </label>
                                <span class="text-danger" asp-validation-for="City"></span>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-floating mb-3">
                                <input type="number" class="form-control " id="zipCode" placeholder="Zip Code" asp-for="Zipcode">
                                <label for="zipCode">Zip Code</label>
                                <span class="text-danger" asp-validation-for="Zipcode"></span>
                            </div>
                        </div>
                        <div class="col-lg-6 form-floating mb-3">
<<<<<<< HEAD
                            <input id="phone" type="text" class="form-control phone py-3" placeholder="alt Phone Number" asp-for="AltPhone">
                            <label for="cemail"> Alt Phone Number</label>
=======
                            <input id="phone" type="tel" class="form-control phone py-3" asp-for="AltPhone">
>>>>>>> a7d636f3ea8b91980d7206e593c9e656cfc1182e
                            <span class="text-danger" asp-validation-for="AltPhone"></span>
                        </div>
                    </div>

                    <div class="d-flex justify-content-end">
                        <button type="submit" id="submitButton" class="btn text-white bg-success me-3">Create Account</button>
                    </div>

                </div>

            </form>

        </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {


        $('.dropdown-toggle').click(function () {
            var dropdownMenu = $(this).next('.dropdown-menu');
            $('.dropdown-menu').not(dropdownMenu).hide();
            dropdownMenu.toggle();
        });

        $(document).on('click', function (e) {
            if (!$(e.target).closest('.dropdown').length) {
                $('.dropdown-menu').hide();
            }
        });

    });

    function checkEmail() {
        var email = document.getElementById("email").value;

        if (email.trim() === "") {
            //toastr.error("Email field is required.");
            return;
        }
        fetch('/Admin/CreateAdminAccount/CheckEmail/' + email)
            .then(response => response.json())
            .then(data => {
                var submitButton = document.getElementById('submitButton');
                if (data.exists) {
                    submitButton.setAttribute("disabled", "disabled");
                    toastr.error('Email Already Exists');
                }
                else {
                    submitButton.removeAttribute("disabled");
                }
            })

    }
</script>