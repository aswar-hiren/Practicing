@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var requestid = ViewBag.requestid;
}
@model DataLayer.ViewModels.viewdocumentmodel;
<Partial name="_Notification" />
<div class="navbar-expand-md shadow">
    <div class="d-flex justify-content-between border-bottom border-1 ">

        <button class="navbar-toggler d-block d-md-none navbar-light border-0 mt-3 ms-2" type="button" data-bs-toggle="collapse"
                data-bs-target="#myTab" aria-controls="myTab" aria-expanded="false"
                aria-label="Toggle navigation" style="height: 50%;">
            <span class="navbar-toggler-icon"></span>
        </button>


        <img src="~/Images/hellodoclogo.png" alt="hallodoc" width="90" class="m-3" />
        <div class="mx-2 mt-3">
            <span class="m-2">Welcome <strong>@ViewBag.username</strong></span>
            <button asp-for="PatientLoginPage" class="text-info px-2 py-2 border border-info rounded-2"
                    style="background: transparent">
                <i class="bi bi-box-arrow-left me-2 d-inline-block d-md-none "></i><span class="d-none d-md-inline-block">Logout</span>
            </button>
            <button onclick="toggle1()" class="bi bi-moon bg-white  pointer border border-1 border-info px-3 py-2 rounded text-info"></button>
        </div>
    </div>

  
</div>

<div class="create-patient-main mx-auto w-75">
    <div class="row mt-5 mb-3">
        <div class="d-flex justify-content-between">
            <h4>Documents</h4>
            <a asp-action="Patient_dashboard" asp-route-page=1 asp-route-pageSize="8" class="btn btn-white border-1 border-info text-info rounded-1">&lt; &nbspBack</a>
        </div>
    </div>
    <div class="row shadow">
        <div class="ps-3">
            <p class="mt-3 " style="font-size:14px;">Patient Name</p>
            <h5 class="text-info "><strong>Testing Test</strong> <small class="text-muted fs-6"> @ViewBag.FirstName</small> </h5>
            <p class="text-muted h6 mb-4 mt-3">Check here for any files that you or the doctors of your subsequents requestor have attched for you to review </p>
            <form enctype="multipart/form-data" asp-action="ViewDocument"  asp-controller="Patient" asp-route-reqid=@requestid>
                <div class="rounded-1 border-1 d-flex justify-content-between mb-5  ">
                    <input type="file"
                           class="form-control"
                           id="floatingInput1"
                           placeholder="Choose file"  asp-for="Photo" />


                    <button type="submit" class="text-info border-2 border-info py-2  bg-info text-white"><i class="bi bi-cloud-arrow-down text-white px-1 d-block d-sm-block d-md-block d-lg-none d-xl-none  "></i> <span class="d-none d-sm-none d-md-none d-lg-block d-xl-block "> Uploads</span> </button>
                </div>
            </form>
        </div>
        <form enctype="multipart/form-data" asp-action="DownLoadAll" asp-controller="Patient" asp-route-requestid=@ViewBag.requestid>
        <div class="d-flex justify-content-between ps-3 mb-4">
            <h4>Documents</h4> 
          <div>

                <button type="submit"  class="btn btn-white border-1 border-info text-info rounded-1">Download All</button>
            </div>
          </div>  

        <table class="table sorttable mb-0 ">
            <thead class="thead" style="background-color:#f1f1f1;">
                <tr>
                    <th scope="col">
                        <div class="checkbox">
                            <input type="checkbox" class="check" id="checkAll">
                        </div>
                    </th>

                    <th scope="col">Uploader</th>
                    <th scope="col">Upload Date</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody>
            
                    @{
                        foreach (var item in (List<DataLayer.Models.Requestwisefile>)ViewBag.documents)
                        {
                        <tr>
                            <td>
                                <div class="checkbox">
                                    <input type="checkbox" class="check" name="allfile" value="@item.Requestwisefileid">

                                </div>
                            </td>

                            <td>@ViewBag.Uploder</td>
                            <td>@item.Createddate</td>
                            <td><a asp-action="Download" asp-controller="Patient" asp-route-documentid=@item.Requestwisefileid class="btn-white text-info border-1 border-info  rounded-1 p-2"><i class="bi bi-cloud-arrow-down text-info  "></i></a></td>
                        </tr>
                        }
                     }
             
              
            </tbody>
        </table>
        </form>
    </div>

</div>

<script>
    document.getElementById("checkAll").addEventListener("click", function () {
        var checkboxes = document.querySelectorAll(".check");
        checkboxes.forEach(function (checkbox) {
            checkbox.checked = document.getElementById("checkAll").checked;
        });
    });

</script>